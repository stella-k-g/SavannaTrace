This savanna Trace MQTT project contains an application that uses MQTT to request an IP address The python application can:
    Connect to the MQTT broker. if it fails it retries after a set time say 5 seconds until it connects. Read the IP address assigned from WIFI
    Send the IP address to a user subscribing to the same topic. 
    As a bonus, this project has a HTML user interface with a VUEJS instance would show prompts and displays the IP address when a button is clicked.

